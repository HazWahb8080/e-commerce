{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\jamstack-ecommerce\\\\components\\\\ViewInventory.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { fetchInventory } from '../utils/inventoryProvider';\nimport DENOMINATION from '../utils/currencyProvider';\nimport Image from '../components/Image';\nimport Link from 'next/link';\nimport { slugify } from '../utils/helpers';\nimport { FaTimes } from 'react-icons/fa';\n\nvar ViewInventory = /*#__PURE__*/function (_React$Component) {\n  _inherits(ViewInventory, _React$Component);\n\n  var _super = _createSuper(ViewInventory);\n\n  function ViewInventory() {\n    var _this;\n\n    _classCallCheck(this, ViewInventory);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      inventory: [],\n      currentItem: {},\n      editingIndex: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchInventory\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var inventory;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetchInventory();\n\n            case 2:\n              inventory = _context.sent;\n\n              _this.setState({\n                inventory: inventory\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"editItem\", function (item, index) {\n      var editingIndex = index;\n\n      _this.setState({\n        editingIndex: editingIndex,\n        currentItem: item\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"saveItem\", /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(index) {\n        var inventory;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                inventory = _toConsumableArray(_this.state.inventory);\n                inventory[index] = _this.state.currentItem; // update item in database\n\n                _this.setState({\n                  editingIndex: null,\n                  inventory: inventory\n                });\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"deleteItem\", /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(index) {\n        var inventory;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                inventory = [].concat(_toConsumableArray(_this.state.inventory.slice(0, index)), _toConsumableArray(_this.state.inventory.slice(index + 1)));\n\n                _this.setState({\n                  inventory: inventory\n                });\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (event) {\n      var currentItem = _objectSpread(_objectSpread({}, _this.state.currentItem), {}, _defineProperty({}, event.target.name, event.target.value));\n\n      _this.setState({\n        currentItem: currentItem\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(ViewInventory, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchInventory();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          inventory = _this$state.inventory,\n          currentItem = _this$state.currentItem,\n          editingIndex = _this$state.editingIndex;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-3xl\",\n          children: \"Inventory\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 9\n        }, this), inventory.map(function (item, index) {\n          var isEditing = editingIndex === index;\n\n          if (isEditing) {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-b py-10\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(Link, {\n                  href: \"/product/\".concat(slugify(item.name)),\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    \"aria-label\": item.name,\n                    children: /*#__PURE__*/_jsxDEV(Image, {\n                      className: \"w-32 m-0\",\n                      src: item.image,\n                      alt: item.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 58,\n                      columnNumber: 25\n                    }, _this2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 57,\n                    columnNumber: 23\n                  }, _this2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 56,\n                  columnNumber: 21\n                }, _this2), /*#__PURE__*/_jsxDEV(\"input\", {\n                  onChange: function onChange(e) {\n                    return _this2.onChange(e, index);\n                  },\n                  className: \"ml-8 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n                  value: currentItem.name,\n                  placeholder: \"Item name\",\n                  name: \"name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 61,\n                  columnNumber: 21\n                }, _this2), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-1 justify-end items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"m-0 text-sm mr-2\",\n                    children: \"In stock:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 69,\n                    columnNumber: 23\n                  }, _this2), /*#__PURE__*/_jsxDEV(\"input\", {\n                    onChange: _this2.onChange,\n                    className: \"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n                    value: currentItem.currentInventory,\n                    name: \"currentInventory\",\n                    placeholder: \"Item inventory\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 70,\n                    columnNumber: 23\n                  }, _this2), /*#__PURE__*/_jsxDEV(\"input\", {\n                    onChange: _this2.onChange,\n                    className: \"ml-16 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n                    value: currentItem.price,\n                    name: \"price\",\n                    placeholder: \"Item price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 77,\n                    columnNumber: 23\n                  }, _this2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 68,\n                  columnNumber: 21\n                }, _this2), /*#__PURE__*/_jsxDEV(\"div\", {\n                  role: \"button\",\n                  onClick: function onClick() {\n                    return _this2.saveItem(index);\n                  },\n                  className: \"m-0 ml-10 text-gray-900 text-s cursor-pointer\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm ml-10 m-0\",\n                    children: \"Save\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 86,\n                    columnNumber: 23\n                  }, _this2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 21\n                }, _this2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 19\n              }, _this2)\n            }, item.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 17\n            }, _this2);\n          }\n\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-b py-10\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                href: \"/product/\".concat(slugify(item.name)),\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  children: /*#__PURE__*/_jsxDEV(Image, {\n                    className: \"w-32 m-0\",\n                    src: item.image,\n                    alt: item.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 97,\n                    columnNumber: 23\n                  }, _this2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 21\n                }, _this2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 19\n              }, _this2), /*#__PURE__*/_jsxDEV(Link, {\n                href: \"/product/\".concat(slugify(item.name)),\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"m-0 pl-10 text-gray-600 text-sm\",\n                    children: item.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 102,\n                    columnNumber: 23\n                  }, _this2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 21\n                }, _this2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 19\n              }, _this2), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-1 justify-end\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"m-0 pl-10 text-gray-900 text-sm\",\n                  children: [\"In stock: \", item.currentInventory]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 21\n                }, _this2), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"m-0 pl-20 text-gray-900 font-semibold\",\n                  children: DENOMINATION + item.price\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 21\n                }, _this2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 19\n              }, _this2), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center m-0 ml-10 text-gray-900 text-s cursor-pointer\",\n                children: [/*#__PURE__*/_jsxDEV(FaTimes, {\n                  onClick: function onClick() {\n                    return _this2.deleteItem(index);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 21\n                }, _this2), /*#__PURE__*/_jsxDEV(\"p\", {\n                  role: \"button\",\n                  onClick: function onClick() {\n                    return _this2.editItem(item, index);\n                  },\n                  className: \"text-sm ml-10 m-0\",\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 21\n                }, _this2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 19\n              }, _this2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 17\n            }, _this2)\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, _this2);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return ViewInventory;\n}(React.Component);\n\nexport default ViewInventory;","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/jamstack-ecommerce/components/ViewInventory.js"],"names":["React","fetchInventory","DENOMINATION","Image","Link","slugify","FaTimes","ViewInventory","inventory","currentItem","editingIndex","setState","item","index","state","slice","event","target","name","value","map","isEditing","image","e","onChange","currentInventory","price","saveItem","id","deleteItem","editItem","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { fetchInventory } from '../utils/inventoryProvider'\r\nimport DENOMINATION from '../utils/currencyProvider'\r\nimport Image from '../components/Image'\r\nimport Link from 'next/link'\r\nimport { slugify } from '../utils/helpers'\r\nimport { FaTimes } from 'react-icons/fa'\r\n\r\nclass ViewInventory extends React.Component {\r\n  state = {\r\n    inventory: [],\r\n    currentItem: {},\r\n    editingIndex: []\r\n  }\r\n  componentDidMount() {\r\n    this.fetchInventory()\r\n  }\r\n  fetchInventory = async() => {\r\n    const inventory = await fetchInventory()\r\n    this.setState({ inventory })\r\n  }\r\n  editItem = (item, index) => {\r\n    const editingIndex = index\r\n    this.setState({ editingIndex, currentItem: item })    \r\n  }\r\n  saveItem = async index => {\r\n    const inventory = [...this.state.inventory]\r\n    inventory[index] = this.state.currentItem\r\n    // update item in database\r\n    this.setState({ editingIndex: null, inventory })\r\n  }\r\n  deleteItem = async index => {\r\n    const inventory = [...this.state.inventory.slice(0, index), ...this.state.inventory.slice(index + 1)]\r\n    this.setState({ inventory })\r\n  }\r\n  onChange = event => {\r\n    const currentItem = {\r\n      ...this.state.currentItem,\r\n      [event.target.name]: event.target.value\r\n    }\r\n    \r\n    this.setState({ currentItem })\r\n  }\r\n  render() {\r\n    const { inventory, currentItem, editingIndex } = this.state\r\n    return (\r\n      <div>\r\n        <h2 className=\"text-3xl\">Inventory</h2>\r\n        {\r\n          inventory.map((item, index) => {\r\n            const isEditing = editingIndex === index\r\n            if (isEditing) {\r\n              return (\r\n                <div className=\"border-b py-10\" key={item.id}>\r\n                  <div className=\"flex items-center\">\r\n                    <Link href={`/product/${slugify(item.name)}`}>\r\n                      <a aria-label={item.name}>\r\n                        <Image className=\"w-32 m-0\" src={item.image} alt={item.name} />\r\n                      </a>\r\n                    </Link>\r\n                    <input\r\n                      onChange={(e) => this.onChange(e, index)}\r\n                      className=\"ml-8 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                      value={currentItem.name}\r\n                      placeholder=\"Item name\"\r\n                      name=\"name\"\r\n                    />\r\n                    <div className=\"flex flex-1 justify-end items-center\">\r\n                      <p className=\"m-0 text-sm mr-2\">In stock:</p>\r\n                      <input\r\n                        onChange={this.onChange}\r\n                        className=\"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                        value={currentItem.currentInventory}\r\n                        name=\"currentInventory\"\r\n                        placeholder=\"Item inventory\"\r\n                      />\r\n                      <input\r\n                        onChange={this.onChange}\r\n                        className=\"ml-16 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n                        value={currentItem.price}\r\n                        name=\"price\"\r\n                        placeholder=\"Item price\"\r\n                      />\r\n                    </div>\r\n                    <div role=\"button\" onClick={() => this.saveItem(index)} className=\"m-0 ml-10 text-gray-900 text-s cursor-pointer\">\r\n                      <p className=\"text-sm ml-10 m-0\">Save</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )\r\n            }\r\n            return (\r\n              <div className=\"border-b py-10\" key={item.id}>\r\n                <div className=\"flex items-center\">\r\n                  <Link href={`/product/${slugify(item.name)}`}>\r\n                    <a>\r\n                      <Image className=\"w-32 m-0\" src={item.image} alt={item.name} />\r\n                    </a>\r\n                  </Link>\r\n                  <Link href={`/product/${slugify(item.name)}`}>\r\n                    <a>\r\n                      <p className=\"m-0 pl-10 text-gray-600 text-sm\">\r\n                        {item.name}\r\n                      </p>\r\n                    </a>\r\n                  </Link>\r\n                  <div className=\"flex flex-1 justify-end\">\r\n                    <p className=\"m-0 pl-10 text-gray-900 text-sm\">In stock: {item.currentInventory}</p>\r\n                    <p className=\"m-0 pl-20 text-gray-900 font-semibold\">\r\n                      {DENOMINATION + item.price}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"flex items-center m-0 ml-10 text-gray-900 text-s cursor-pointer\">\r\n                    <FaTimes onClick={() => this.deleteItem(index)} />\r\n                    <p role=\"button\" onClick={() => this.editItem(item, index)} className=\"text-sm ml-10 m-0\">Edit</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )\r\n          })\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ViewInventory"]},"metadata":{},"sourceType":"module"}