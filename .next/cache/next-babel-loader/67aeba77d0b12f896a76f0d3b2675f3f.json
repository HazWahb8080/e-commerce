{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\jamstack-ecommerce\\\\context\\\\mainContext.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { toast } from 'react-toastify';\nimport React from 'react';\nvar STORAGE_KEY = 'NEXT_ECOMMERCE_STARTER_';\nvar initialState = {\n  cart: [],\n  numberOfItemsInCart: 0,\n  total: 0\n};\nvar SiteContext = /*#__PURE__*/React.createContext();\n\nfunction calculateTotal(cart) {\n  var total = cart.reduce(function (acc, next) {\n    var quantity = next.quantity;\n    acc = acc + JSON.parse(next.price) * quantity;\n    return acc;\n  }, 0);\n  return total;\n}\n\nvar ContextProviderComponent = /*#__PURE__*/function (_React$Component) {\n  _inherits(ContextProviderComponent, _React$Component);\n\n  var _super = _createSuper(ContextProviderComponent);\n\n  function ContextProviderComponent() {\n    var _this;\n\n    _classCallCheck(this, ContextProviderComponent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"setItemQuantity\", function (item) {\n      var storageState = JSON.parse(window.localStorage.getItem(STORAGE_KEY));\n      var cart = storageState.cart;\n      var index = cart.findIndex(function (cartItem) {\n        return cartItem.id === item.id;\n      });\n      cart[index].quantity = item.quantity;\n      window.localStorage.setItem(STORAGE_KEY, JSON.stringify({\n        cart: cart,\n        numberOfItemsInCart: cart.length,\n        total: calculateTotal(cart)\n      }));\n\n      _this.forceUpdate();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addToCart\", function (item) {\n      var storageState = JSON.parse(window.localStorage.getItem(STORAGE_KEY));\n      var cart = storageState.cart;\n\n      if (cart.length) {\n        var index = cart.findIndex(function (cartItem) {\n          return cartItem.id === item.id;\n        });\n\n        if (index >= Number(0)) {\n          /* If this item is already in the cart, update the quantity */\n          cart[index].quantity = cart[index].quantity + item.quantity;\n        } else {\n          /* If this item is not yet in the cart, add it */\n          cart.push(item);\n        }\n      } else {\n        /* If no items in the cart, add the first item. */\n        cart.push(item);\n      }\n\n      window.localStorage.setItem(STORAGE_KEY, JSON.stringify({\n        cart: cart,\n        numberOfItemsInCart: cart.length,\n        total: calculateTotal(cart)\n      }));\n      toast(\"Successfully added item to cart!\", {\n        position: toast.POSITION.TOP_LEFT\n      });\n\n      _this.forceUpdate();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeFromCart\", function (item) {\n      var storageState = JSON.parse(window.localStorage.getItem(STORAGE_KEY));\n      var cart = storageState.cart;\n      cart = cart.filter(function (c) {\n        return c.id !== item.id;\n      });\n      window.localStorage.setItem(STORAGE_KEY, JSON.stringify({\n        cart: cart,\n        numberOfItemsInCart: cart.length,\n        total: calculateTotal(cart)\n      }));\n\n      _this.forceUpdate();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearCart\", function () {\n      window.localStorage.setItem(STORAGE_KEY, JSON.stringify(initialState));\n\n      _this.forceUpdate();\n    });\n\n    return _this;\n  }\n\n  _createClass(ContextProviderComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (true) {\n        var storageState = window.localStorage.getItem(STORAGE_KEY);\n\n        if (!storageState) {\n          window.localStorage.setItem(STORAGE_KEY, JSON.stringify(initialState));\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var state = initialState;\n\n      if (true) {\n        var storageState = window.localStorage.getItem(STORAGE_KEY);\n\n        if (storageState) {\n          state = JSON.parse(storageState);\n        }\n      }\n\n      return /*#__PURE__*/_jsxDEV(SiteContext.Provider, {\n        value: _objectSpread(_objectSpread({}, state), {}, {\n          addToCart: this.addToCart,\n          clearCart: this.clearCart,\n          removeFromCart: this.removeFromCart,\n          setItemQuantity: this.setItemQuantity\n        }),\n        children: this.props.children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return ContextProviderComponent;\n}(React.Component);\n\nexport { SiteContext, ContextProviderComponent };","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/jamstack-ecommerce/context/mainContext.js"],"names":["toast","React","STORAGE_KEY","initialState","cart","numberOfItemsInCart","total","SiteContext","createContext","calculateTotal","reduce","acc","next","quantity","JSON","parse","price","ContextProviderComponent","item","storageState","window","localStorage","getItem","index","findIndex","cartItem","id","setItem","stringify","length","forceUpdate","Number","push","position","POSITION","TOP_LEFT","filter","c","state","addToCart","clearCart","removeFromCart","setItemQuantity","props","children","Component"],"mappings":"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","sourcesContent":["import { toast } from 'react-toastify'\r\nimport React from 'react'\r\nconst STORAGE_KEY = 'NEXT_ECOMMERCE_STARTER_'\r\n\r\nconst initialState = {\r\n  cart: [],\r\n  numberOfItemsInCart: 0,\r\n  total: 0\r\n}\r\n\r\nconst SiteContext = React.createContext()\r\n\r\nfunction calculateTotal(cart) {\r\n  const total = cart.reduce((acc, next) => {\r\n    const quantity = next.quantity\r\n    acc = acc + JSON.parse(next.price) * quantity\r\n    return acc\r\n  }, 0)\r\n  return total\r\n}\r\n\r\nclass ContextProviderComponent extends React.Component {\r\n  componentDidMount() {\r\n    if (typeof window !== 'undefined') {\r\n      const storageState = window.localStorage.getItem(STORAGE_KEY)\r\n      if (!storageState) {\r\n        window.localStorage.setItem(STORAGE_KEY, JSON.stringify(initialState))\r\n      }\r\n    }\r\n  }\r\n\r\n  setItemQuantity = (item) => {\r\n    const storageState = JSON.parse(window.localStorage.getItem(STORAGE_KEY))\r\n    const { cart } = storageState\r\n    const index = cart.findIndex(cartItem => cartItem.id === item.id)\r\n    cart[index].quantity = item.quantity\r\n    window.localStorage.setItem(STORAGE_KEY, JSON.stringify({\r\n      cart, numberOfItemsInCart: cart.length, total: calculateTotal(cart)\r\n    }))\r\n    this.forceUpdate()\r\n  }\r\n\r\n  addToCart = item => {\r\n    const storageState = JSON.parse(window.localStorage.getItem(STORAGE_KEY))\r\n    const { cart } = storageState\r\n    if (cart.length) {\r\n      const index = cart.findIndex(cartItem => cartItem.id === item.id)\r\n      if (index >= Number(0)) {\r\n        /* If this item is already in the cart, update the quantity */\r\n        cart[index].quantity = cart[index].quantity + item.quantity\r\n      } else {\r\n        /* If this item is not yet in the cart, add it */\r\n        cart.push(item)\r\n      }\r\n    } else {\r\n      /* If no items in the cart, add the first item. */\r\n      cart.push(item)\r\n    }\r\n\r\n    window.localStorage.setItem(STORAGE_KEY, JSON.stringify({\r\n      cart, numberOfItemsInCart: cart.length, total: calculateTotal(cart)\r\n    }))\r\n    toast(\"Successfully added item to cart!\", {\r\n      position: toast.POSITION.TOP_LEFT\r\n    })\r\n    this.forceUpdate()\r\n  }\r\n\r\n  removeFromCart = (item) => {\r\n    const storageState = JSON.parse(window.localStorage.getItem(STORAGE_KEY))\r\n    let { cart } = storageState\r\n    cart = cart.filter(c => c.id !== item.id)\r\n\r\n    window.localStorage.setItem(STORAGE_KEY, JSON.stringify({\r\n      cart, numberOfItemsInCart: cart.length, total: calculateTotal(cart)\r\n    }))\r\n    this.forceUpdate()\r\n  }\r\n\r\n  clearCart = () => {\r\n    window.localStorage.setItem(STORAGE_KEY, JSON.stringify(initialState))\r\n    this.forceUpdate()\r\n  }\r\n\r\n  render() {\r\n    let state = initialState\r\n    if (typeof window !== 'undefined') {\r\n      const storageState = window.localStorage.getItem(STORAGE_KEY)\r\n      if (storageState) {\r\n        state = JSON.parse(storageState)\r\n      }\r\n    }\r\n\r\n    return (\r\n      <SiteContext.Provider value={{\r\n        ...state,\r\n         addToCart: this.addToCart,\r\n         clearCart: this.clearCart,\r\n         removeFromCart: this.removeFromCart,\r\n         setItemQuantity: this.setItemQuantity\r\n      }}>\r\n       {this.props.children}\r\n     </SiteContext.Provider>\r\n    )\r\n  }\r\n}\r\n\r\nexport {\r\n  SiteContext,\r\n  ContextProviderComponent\r\n}"]},"metadata":{},"sourceType":"module"}